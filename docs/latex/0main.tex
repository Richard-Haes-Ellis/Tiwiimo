\documentclass[a4paper,twoside]{article}

%% Language and font encodings
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}


%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=2.5cm,right=2.5cm,marginparwidth=0.5cm]{geometry}

\usepackage{amsmath}			%Paquete matemático
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}

\usepackage{hyperref}		%Paquete empleado para colocar hipervinculos
\hypersetup{
	colorlinks = true,
	linkcolor = black,
}

\usepackage{eurosym}
\usepackage{pdfpages}			%Sirve para incluir PDF en el documento
\usepackage{anysize}			%Podremos colocar imagenes de cualquier tamaño
\usepackage{subfig}				%Nos permitira colocar varias imagenes en una figura
\usepackage{float}				%Podremos crear y colocar boxes donee queramos
\usepackage[export]{adjustbox}

%Colocamos cabeceras y pies de pagina
%(CONSULTA: http://edicionesoniricas.com/maquetar-latex-encabezados-pies-pagina/)
%(CONSULTA2: https://es.sharelatex.com/learn/Headers_and_footers)
%\bfseries es análogo a \textbf{}
% \leftmark-> Adds name and number of the current top-level structure (section for article) in uppercase letters.
%\rightmark-> Adds name and number of the current next to top-level structure (subsection for article) in uppercase letters.
\usepackage{fancyhdr}		%Paquetes necesarios
\pagestyle{fancy}			%Borra los parametros por defecto
\fancyhf{}
\fancyhead[RO,LE]{\bfseries\thepage}
\fancyhead[LO,RE]{\bfseries\rightmark}
%Nos aseguramos de que en las paginas plain, no haya ni cabeceras ni lineas
\fancypagestyle{plain}
{
	\fancyhead{} % elimina cabeceras en paginas "plain"
	\renewcommand{\headrulewidth}{0pt} % así como la raya
}

%Definimos las lineas divisoras de las cabeceras y pie de pagina
\renewcommand{\headrulewidth}{1pt}	%Define el grosor de la línea de head
\renewcommand{\footrulewidth}{0pt}		%Define el grosor de la linea foot (Si no queremos linea, 0pt)
\addtolength{\headheight}{0.5pt} % espacio para la raya

%Librerias para introducir código de Matlab
%\usepackage{bigfoot} % to allow verbatim in footnote
\usepackage[numbered,framed]{matlab-prettifier}

\lstset{
	style              = Matlab-editor,
	basicstyle         = \mlttfamily,
	escapechar         = ",
	mlshowsectionrules = true
}

% %%%%%%%%% INTRODUCIR CODIGO DE C %%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}
\usepackage{xcolor} % for setting colors

% set the default code style
%:Paquete para modificar los colores de diferentes elementos del codigo

\definecolor{mGreen}{rgb}{0,0.6,0}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{mPurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundColour}{rgb}{0.95,0.95,0.92}

%Definimos el estilo del codigo de C
\lstdefinestyle{CStyle}{
	backgroundcolor=\color{backgroundColour},
	commentstyle=\color{mGreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{mGray},
	stringstyle=\color{mPurple},
	basicstyle=\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2,
	language=C,
}
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Pie de pagina
%\fancyfoot{} % limpia el pie
\fancyfoot[C]{- \thepage -} % número de página centrado

%Nos generará texto para pruebas de maquetado
\usepackage{lipsum}

% To include VHDL code
\usepackage{minted}

% To can use multirow
\usepackage{multirow}

% Se varia el limite de colimnas de latex
\setcounter{MaxMatrixCols}{11}
\usepackage{lscape}
%----------------------------------------------------------------------------------------------------------------------------------
\begin{document}
\begin{titlepage}
	\centering
\Huge{\textbf{SISTEMAS ELECTRÓNICOS PARA LA AUTOMATIZACIÓN}} \\
\Huge{\textit{Proyecto de microcontroladores}}\\

\vspace{1cm}
\LARGE{Grado en Ingeniería Electrónica, Mecatrónica y Robótica}\\
\rule{\textwidth}{0.1mm}
% \begin{figure}[h!]
%	\centering
%	\includegraphics[width=.5\textwidth]{fpga}
%	% \caption{Placa de desarrollo}
% \end{figure}

\vspace{2cm}
\rule{\textwidth}{0.1mm}
\Large{\textbf{Autores:} Haes-Ellis, Richard Mark\\
			Montes Grova, Marco Antonio}
\end{titlepage}
\tableofcontents
\newpage

% %%%%%%%%%%%   INTRODUCCION %%%%%%%%%%%%%%%%%%
\section{Introducción teórica}

\begin{lstlisting}[language=C,style=CStyle, caption={Declaración e inicialización de variables}]

\end{lstlisting}

\begin{verbatim}
# KeyPad Digilent Adept Conexions
#Input
Net gpio_keypad_GPIO_IO_I_pin<0> LOC=K12 | IOSTANDARD=LVCMOS33; #ROW4
Net gpio_keypad_GPIO_IO_I_pin<1> LOC=K13 | IOSTANDARD=LVCMOS33; #ROW3
Net gpio_keypad_GPIO_IO_I_pin<2> LOC=F17 | IOSTANDARD=LVCMOS33; #ROW2
Net gpio_keypad_GPIO_IO_I_pin<3> LOC=F18 | IOSTANDARD=LVCMOS33; #ROW1
#Output
Net gpio_keypad_GPIO2_IO_O_pin<0> LOC=H12 | IOSTANDARD=LVCMOS33; #COL4
Net gpio_keypad_GPIO2_IO_O_pin<1> LOC=G13 | IOSTANDARD=LVCMOS33; #COL3
Net gpio_keypad_GPIO2_IO_O_pin<2> LOC=E16 | IOSTANDARD=LVCMOS33; #COL2
Net gpio_keypad_GPIO2_IO_O_pin<3> LOC=E18 | IOSTANDARD=LVCMOS33; #COL1
\end{verbatim}

\begin{table}[h!]
    \centering
    \begin{tabular}{|l|l|l|l|}
    \hline
     &\multicolumn{1}{c|}{Instrucción} & {Operator Code} & {Descripción} \\
     \hline \hline
    \multirow{6}{*}{\textit{Load and Stores}} & LDA\_IMM  & x"86",<data> & Carga con direccionamiento inmediato \\ \cline{2-4}
                            								  & LDA\_DIR  & x"87",<addr> & Carga con direccionamiento directo \\ \cline{2-4}
                            								  & LDB\_IMM  & x"88",<data> & Carga con direccionamiento inmediato \\ \cline{2-4}
                            								  & LDB\_DIR  & x"89",<addr> & Carga con direccionamiento directo \\ \cline{2-4}
																						  & STA\_DIR  & x"96",<addr> & Almacena dato en registro A \\ \cline{2-4}
																							& STB\_DIR  & x"97",<addr> & Almacena dato en registro B \\ \cline{2-4}
																							\hline
	\multirow{8}{*}{\textit{Data Manipulations}} & ADD\_AB  & x"42" & A=A+B \\ \cline{2-4}
	                         								     & SUB\_AB  & x"43" & A=A-B \\ \cline{2-4}
																					  & AND\_AB  & x"44" &  A = A \& B \\ \cline{2-4}
																					  & OR\_AB  & x"45" &  A=A | B \\ \cline{2-4}
																						& INCA  & x"46" &   A=A+1 \\ \cline{2-4}
																						& INCB  & x"47" &  B=B+1 \\ \cline{2-4}
																						& DECA  & x"48" &  A=A-1 \\ \cline{2-4}
																						& DECB  & x"49" &  B=B-1 \\ \cline{2-4}
																							\hline
 \multirow{9}{*}{\textit{Branches}}  & BRA  & x"20",<addr> & Branch siempre \\ \cline{2-4}
                          					 & BMI  & x"21",<addr> & Branch si N=1 \\ \cline{2-4}
																		 & BPL  & x"22",<addr> & Branch si N=0 \\ \cline{2-4}
																		 & BEQ  & x"23",<addr> & Branch si Z=1 \\ \cline{2-4}
																	   & BNE  & x"24",<addr> & Branch si Z=0 \\ \cline{2-4}
																		 & BVS  & x"25",<addr> & Branch si V=1 \\ \cline{2-4}
																		 & BVC  & x"26",<addr> & Branch si V=0 \\ \cline{2-4}
																		 & BCS  & x"27",<addr> & Branch si C=1 \\ \cline{2-4}
																	   & BCC  & x"28",<addr> & Branch si C=0 \\ \cline{2-4}
																		 	\hline
    \end{tabular}    \caption{Set de instrucciones del microprocesador}
    \end{table}

\begin{minted}[obeytabs,linenos,firstnumber=1,frame=leftline]{vhdl}
constant ROM : rom_type := (0=> LDA_DIR,
			    1=> x"F0",
			    2=> LDB_DIR,
			    3=> x"F1",
			    4=> ADD_AB, -- Put the result in regA
			    5=> STA_DIR,
			    6=> x"E0",
			    7=> BRA,
			    8=> x"00",
			    others => x"00");
\end{minted}


\end{document}
